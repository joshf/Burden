var bootbox=window.bootbox||(function(document,$){var _locale='en',_defaultLocale='en',_animate=true,_backdrop='static',_defaultHref='javascript:;',_classes='',_btnClasses={},_icons={},that={};that.setLocale=function(locale){for(var i in _locales){if(i==locale){_locale=locale;return}}throw new Error('Invalid locale: '+locale)};that.addLocale=function(locale,translations){if(typeof _locales[locale]==='undefined'){_locales[locale]={}}for(var str in translations){_locales[locale][str]=translations[str]}};that.setIcons=function(icons){_icons=icons;if(typeof _icons!=='object'||_icons===null){_icons={}}};that.setBtnClasses=function(btnClasses){_btnClasses=btnClasses;if(typeof _btnClasses!=='object'||_btnClasses===null){_btnClasses={}}};that.alert=function(){var str="",label=_translate('OK'),cb=null;switch(arguments.length){case 1:str=arguments[0];break;case 2:str=arguments[0];if(typeof arguments[1]=='function'){cb=arguments[1]}else{label=arguments[1]}break;case 3:str=arguments[0];label=arguments[1];cb=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return that.dialog(str,{"label":label,"icon":_icons.OK,"class":_btnClasses.OK,"callback":cb},{"onEscape":cb||true})};that.confirm=function(){var str="",labelCancel=_translate('CANCEL'),labelOk=_translate('CONFIRM'),cb=null;switch(arguments.length){case 1:str=arguments[0];break;case 2:str=arguments[0];if(typeof arguments[1]=='function'){cb=arguments[1]}else{labelCancel=arguments[1]}break;case 3:str=arguments[0];labelCancel=arguments[1];if(typeof arguments[2]=='function'){cb=arguments[2]}else{labelOk=arguments[2]}break;case 4:str=arguments[0];labelCancel=arguments[1];labelOk=arguments[2];cb=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var cancelCallback=function(){if(typeof cb==='function'){return cb(false)}};var confirmCallback=function(){if(typeof cb==='function'){return cb(true)}};return that.dialog(str,[{"label":labelCancel,"icon":_icons.CANCEL,"class":_btnClasses.CANCEL,"callback":cancelCallback},{"label":labelOk,"icon":_icons.CONFIRM,"class":_btnClasses.CONFIRM,"callback":confirmCallback}],{"onEscape":cancelCallback})};that.prompt=function(){var str="",labelCancel=_translate('CANCEL'),labelOk=_translate('CONFIRM'),cb=null,defaultVal="";switch(arguments.length){case 1:str=arguments[0];break;case 2:str=arguments[0];if(typeof arguments[1]=='function'){cb=arguments[1]}else{labelCancel=arguments[1]}break;case 3:str=arguments[0];labelCancel=arguments[1];if(typeof arguments[2]=='function'){cb=arguments[2]}else{labelOk=arguments[2]}break;case 4:str=arguments[0];labelCancel=arguments[1];labelOk=arguments[2];cb=arguments[3];break;case 5:str=arguments[0];labelCancel=arguments[1];labelOk=arguments[2];cb=arguments[3];defaultVal=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var header=str;var form=$("<form></form>");form.append("<input class='input-block-level' autocomplete=off type=text value='"+defaultVal+"' />");var cancelCallback=function(){if(typeof cb==='function'){return cb(null)}};var confirmCallback=function(){if(typeof cb==='function'){return cb(form.find("input[type=text]").val())}};var div=that.dialog(form,[{"label":labelCancel,"icon":_icons.CANCEL,"class":_btnClasses.CANCEL,"callback":cancelCallback},{"label":labelOk,"icon":_icons.CONFIRM,"class":_btnClasses.CONFIRM,"callback":confirmCallback}],{"header":header,"show":false,"onEscape":cancelCallback});div.on("shown",function(){form.find("input[type=text]").focus();form.on("submit",function(e){e.preventDefault();div.find(".btn-primary").click()})});div.modal("show");return div};that.promptcustom=function(){var str="",labelCancel=_translate('CANCEL'),labelOk=_translate('CONFIRM'),cb=null,defaultVal="";str=arguments[0];label=arguments[1];cb=arguments[2];var header=str;var cancelCallback=function(){if(typeof cb==='function'){return cb(null)}};var confirmCallback=function(){if(typeof cb==='function'){return cb(true)}};var div=that.dialog(label,[{"label":labelCancel,"icon":_icons.CANCEL,"class":_btnClasses.CANCEL,"callback":cancelCallback},{"label":labelOk,"icon":_icons.CONFIRM,"class":_btnClasses.CONFIRM,"callback":confirmCallback}],{"header":header,"show":false,"onEscape":cancelCallback});div.modal("show");return div};that.dialog=function(str,handlers,options){var buttons="",callbacks=[];if(!options){options={}}if(typeof handlers==='undefined'){handlers=[]}else if(typeof handlers.length=='undefined'){handlers=[handlers]}var i=handlers.length;while(i--){var label=null,href=null,_class=null,icon='',callback=null;if(typeof handlers[i]['label']=='undefined'&&typeof handlers[i]['class']=='undefined'&&typeof handlers[i]['callback']=='undefined'){var propCount=0,property=null;for(var j in handlers[i]){property=j;if(++propCount>1){break}}if(propCount==1&&typeof handlers[i][j]=='function'){handlers[i]['label']=property;handlers[i]['callback']=handlers[i][j]}}if(typeof handlers[i]['callback']=='function'){callback=handlers[i]['callback']}if(handlers[i]['class']){_class=handlers[i]['class']}else if(i==handlers.length-1&&handlers.length<=2){_class='btn-primary'}if(handlers[i]['link']!==true){_class='btn '+_class}if(handlers[i]['label']){label=handlers[i]['label']}else{label="Option "+(i+1)}if(handlers[i]['icon']){icon="<i class='"+handlers[i]['icon']+"'></i> "}if(handlers[i]['href']){href=handlers[i]['href']}else{href=_defaultHref}buttons="<a data-handler='"+i+"' class='"+_class+"' href='"+href+"'>"+icon+""+label+"</a>"+buttons;callbacks[i]=callback}var parts=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(options['header']){var closeButton='';if(typeof options['headerCloseButton']=='undefined'||options['headerCloseButton']){closeButton="<a href='"+_defaultHref+"' class='close'>&times;</a>"}parts.push("<div class='modal-header'>"+closeButton+"<h3>"+options['header']+"</h3></div>")}parts.push("<div class='modal-body'></div>");if(buttons){parts.push("<div class='modal-footer'>"+buttons+"</div>")}parts.push("</div>");var div=$(parts.join("\n"));var shouldFade=(typeof options.animate==='undefined')?_animate:options.animate;if(shouldFade){div.addClass("fade")}var optionalClasses=(typeof options.classes==='undefined')?_classes:options.classes;if(optionalClasses){div.addClass(optionalClasses)}div.find(".modal-body").html(str);function onCancel(source){var hideModal=null;if(typeof options.onEscape==='function'){hideModal=options.onEscape()}if(hideModal!==false){div.modal('hide')}}div.on('keyup.dismiss.modal',function(e){if(e.which===27&&options.onEscape){onCancel('escape')}});div.on('click','a.close',function(e){e.preventDefault();onCancel('close')});div.on('shown',function(){div.find("a.btn-primary:first").focus()});div.on('hidden',function(e){if(e.target===this){div.remove()}});div.on('click','.modal-footer a',function(e){var handler=$(this).data("handler"),cb=callbacks[handler],hideModal=null;if(typeof handler!=='undefined'&&typeof handlers[handler]['href']!=='undefined'){return}e.preventDefault();if(typeof cb==='function'){hideModal=cb(e)}if(hideModal!==false){div.modal("hide")}});$("body").append(div);div.modal({backdrop:(typeof options.backdrop==='undefined')?_backdrop:options.backdrop,keyboard:false,show:false});div.on("show",function(e){$(document).off("focusin.modal")});if(typeof options.show==='undefined'||options.show===true){div.modal("show")}return div};that.modal=function(){var str;var label;var options;var defaultOptions={"onEscape":null,"keyboard":true,"backdrop":_backdrop};switch(arguments.length){case 1:str=arguments[0];break;case 2:str=arguments[0];if(typeof arguments[1]=='object'){options=arguments[1]}else{label=arguments[1]}break;case 3:str=arguments[0];label=arguments[1];options=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}defaultOptions['header']=label;if(typeof options=='object'){options=$.extend(defaultOptions,options)}else{options=defaultOptions}return that.dialog(str,[],options)};that.hideAll=function(){$(".bootbox").modal("hide")};that.animate=function(animate){_animate=animate};that.backdrop=function(backdrop){_backdrop=backdrop};that.classes=function(classes){_classes=classes};var _locales={'br':{OK:'OK',CANCEL:'Cancelar',CONFIRM:'Sim'},'da':{OK:'OK',CANCEL:'Annuller',CONFIRM:'Accepter'},'de':{OK:'OK',CANCEL:'Abbrechen',CONFIRM:'Akzeptieren'},'en':{OK:'OK',CANCEL:'Cancel',CONFIRM:'OK'},'es':{OK:'OK',CANCEL:'Cancelar',CONFIRM:'Aceptar'},'fr':{OK:'OK',CANCEL:'Annuler',CONFIRM:'D\'accord'},'it':{OK:'OK',CANCEL:'Annulla',CONFIRM:'Conferma'},'nl':{OK:'OK',CANCEL:'Annuleren',CONFIRM:'Accepteren'},'pl':{OK:'OK',CANCEL:'Anuluj',CONFIRM:'Potwierdź'},'ru':{OK:'OK',CANCEL:'Отмена',CONFIRM:'Применить'},'zh_CN':{OK:'OK',CANCEL:'取消',CONFIRM:'确认'},'zh_TW':{OK:'OK',CANCEL:'取消',CONFIRM:'確認'}};function _translate(str,locale){if(typeof locale==='undefined'){locale=_locale}if(typeof _locales[locale][str]==='string'){return _locales[locale][str]}if(locale!=_defaultLocale){return _translate(str,_defaultLocale)}return str}return that}(document,window.jQuery));window.bootbox=bootbox;